(this.webpackJsonpcal=this.webpackJsonpcal||[]).push([[0],{36:function(e,t,n){e.exports=n(63)},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(32),u=n.n(c),i=n(9),l=n(15),o=n(1),s=n(8),m=n.n(s),d=n(13),p=n(14),f=n.n(p),E={getAll:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/api/calendar");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addNew:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/calendar",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat("/api/calendar","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e){var t=e.addNew,n=Object(a.useState)(""),c=Object(i.a)(n,2),u=c[0],l=c[1],o=Object(a.useState)(""),s=Object(i.a)(o,2),m=s[0],d=s[1],p=Object(a.useState)(""),f=Object(i.a)(p,2),E=f[0],v=f[1],b=RegExp(/^(0?[1-9]|[12][0-9]|3[01])[/](0?[1-9]|1[012])[/]\d{4}$/),h=RegExp(/([0-2][0-9]):([0-5][0-9])/);return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b.test(u)&&h.test(m)?(l(""),d(""),v(""),t(u,m,E)):window.alert("virhe, ilmoita pvm muodossa pp/kk/vvvv ja aika muodossa tt:mm")}},r.a.createElement("div",null,"pvm:",r.a.createElement("input",{value:u,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",null,"aika:",r.a.createElement("input",{value:m,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",null,"kuvaus:",r.a.createElement("input",{value:E,onChange:function(e){return v(e.target.value)}})),r.a.createElement("button",{type:"submit"},"add"))},b=n(17),h=n(18);function w(){var e=Object(b.a)(["\n  color: #1a21ad\n"]);return w=function(){return e},e}function g(){var e=Object(b.a)(["\n  font-family: Quicksand;\n  font-size: 14px\n"]);return g=function(){return e},e}var O=h.a.td(g()),j=h.a.h1(w()),k=function(e){var t=e.dateTime,n=e.content,a=e.id,c=e.deleteEntry;return r.a.createElement("tr",null,r.a.createElement(O,null,function(e){var t=e.split("T")[0],n=e.split("T")[1],a=t.split("-")[0],r=t.split("-")[1],c=t.split("-")[2],u=n.split(":")[0],i=n.split(":")[1],l="".concat(c,"/").concat(r,"/").concat(a),o="".concat(u,":").concat(i);return"".concat(l," ").concat(o)}(t),":"),r.a.createElement(O,null,n),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return c(a)}},"poista")))},T=function(e){var t=e.listOfEntries,n=e.deleteEntry;return r.a.createElement("table",null,r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(k,{key:e._id,dateTime:e.dateTime,content:e.content,id:e._id,deleteEntry:n})}))))},y=function(e){var t=e.calendarEntries,n=e.setCalendarEntries,a=e.sortByTime;return r.a.createElement("div",null,r.a.createElement("h2",null,"lis\xe4\xe4"),r.a.createElement(v,{addNew:function(e,r,c){var u={dateTime:function(e,t){var n=e.split("/")[0],a=e.split("/")[1],r=e.split("/")[2],c=Number(t.split(":")[0])+2;c<10&&(c="0".concat(c));var u=t.split(":")[1];return Date.parse("".concat(r,"-").concat(a,"-").concat(n,"T").concat(c,":").concat(u))}(e,r),content:c};E.addNew(u).then((function(e){n(t.concat(e).sort(a))})).catch((function(e){window.alert("virhe: ".concat(e))}))}}),r.a.createElement(j,null,"Muista!"),r.a.createElement(T,{listOfEntries:t,deleteEntry:function(e){E.remove(e).then((function(){n(t.filter((function(t){return t._id!==e})))}))}}))},x=function(e){var t=e.calendarEntries,n=new Date(Date.now()),a=t.filter((function(e){var t=new Date(Date.parse(e.dateTime));return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}));return r.a.createElement("div",null,r.a.createElement(j,null,"heips moips p\xe4iv\xe4n jutut:"),r.a.createElement(T,{listOfEntries:a}))},D=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];Object(a.useEffect)((function(){E.getAll().then((function(e){u(e),c(e.sort(s))}))}),[]);var u=function(e){e.forEach((function(e){Date.parse(e.dateTime)<Date.now()&&E.remove(e._id)}))},s=function(e,t){return e.dateTime<t.dateTime?-1:e.dateTime>t.dateTime?1:0};return r.a.createElement(l.a,{basename:"/"},r.a.createElement("div",null,r.a.createElement(l.b,{to:"/"},"koti"),r.a.createElement(l.b,{to:"/calendar"},"kalenteri")),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/calendar"},r.a.createElement(y,{calendarEntries:n,setCalendarEntries:c,sortByTime:s})),r.a.createElement(o.a,{path:"/"},r.a.createElement(x,{calendarEntries:n}))))};u.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.0fbb583d.chunk.js.map